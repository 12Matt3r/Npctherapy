üìÑ Extracted from page: 
URL: https://raw.githubusercontent.com/12Matt3r/Npctherapy/refs/heads/master/npc_therapy_ultimate_fixed.html

Extracted content:
```json
{
    "title": "NPC Therapy - Ultimate Combined Edition",
    "url": "https://raw.githubusercontent.com/12Matt3r/Npctherapy/refs/heads/master/npc_therapy_ultimate_fixed.html",
    "summary": "<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>NPC Therapy - Ultimate Combined Edition</title>\n    <style>\n        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');\n        \n        body {\n            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);\n            color: #fff;\n            font-family: 'Press Start 2P', monospace;\n            text-align: center;\n            image-rendering: pixelated;\n            margin: 0;\n            padding: 20px;\n            overflow-x: hidden;\n        }\n\n        /* CRT Filter Overlay */\n        .crt-overlay {\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            pointer-events: none;\n            background: repeating-linear-gradient(\n                0deg,\n                transparent,\n                transparent 2px,\n                rgba(0, 255, 0, 0.1) 2px,\n                rgba(0, 255, 0, 0.1) 4px\n            );\n            z-index: 9999;\n            opacity: 0.3;\n            animation: scanlines 0.1s linear infinite;\n        }\n\n        @keyframes scanlines {\n            0% { transform: translateY(0); }\n            100% { transform: translateY(4px); }\n        }\n\n        #gameContainer {\n            max-width: 900px;\n            margin: 0 auto;\n            background: #000;\n            border: 4px solid #6ff;\n            box-shadow: 0 0 30px rgba(102, 255, 255, 0.5);\n            position: relative;\n            min-height: 650px;\n            transition: background 0.5s ease;\n            overflow: hidden;\n        }\n\n        #startScreen, #habitatScreen, #therapyOffice, #sessionComplete {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            z-index: 1000;\n        }\n\n        #habitatScreen, #therapyOffice, #sessionComplete {\n            background: linear-gradient(135deg, #101820 0%, #1a1a2e 100%);\n        }\n\n        .screen-title {\n            font-size: 16px;\n            margin-bottom: 20px;\n            color: #6ff;\n            text-shadow: 2px 2px 0px #000;\n        }\n\n        /* Habitat Screen Styles */\n        .habitat-image {\n            width: 100%;\n            max-width: 500px;\n            height: 300px;\n            background-size: cover;\n            background-position: center;\n            border: 4px solid #6ff;\n            margin: 20px 0;\n            position: relative;\n        }\n\n        .npc-sprite {\n            width: 80px;\n            height: 80px;\n            background-size: contain;\n            background-repeat: no-repeat;\n            background-position: center;\n            position: absolute;\n            bottom: 20px;\n            right: 20px;\n            filter: drop-shadow(0 0 10px rgba(102, 255, 255, 0.8));\n        }\n\n        .habitat-description {\n            font-size: 10px;\n            max-width: 600px;\n            margin: 20px;\n            line-height: 1.5;\n            color: #ccc;\n        }\n\n        /* NPC Creation */\n        #npcCreation {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: rgba(0, 0, 0, 0.95);\n            display: none;\n            align-items: center;\n            justify-content: center;\n            flex-direction: column;\n            z-index: 1001;\n            overflow-y: auto;\n        }\n\n        /* Glitch Screen */\n        #glitchScreen {\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background: #000;\n            display: none;\n            z-index: 1002;\n            animation: glitch 2s ease-in-out;\n        }\n\n        @keyframes glitch {\n            0% { filter: none; }\n            25% { filter: hue-rotate(90deg) contrast(200%); }\n            50% { filter: hue-rotate(180deg) invert(100%); }\n            75% { filter: hue-rotate(270deg) contrast(200%); }\n            100% { filter: none; }\n        }\n\n        .form-group {\n            margin: 15px 0;\n            text-align: left;\n        }\n\n        .form-group label {\n            display: block;\n            color: #6ff;\n            font-size: 10px;\n            margin-bottom: 5px;\n        }\n\n        .form-group input, .form-group textarea, .form-group select {\n            width: 100%;\n            padding: 8px;\n            background: #222;\n            border: 1px solid #6ff;\n            color: #fff;\n            font-family: inherit;\n            font-size: 10px;\n        }\n\n        .form-group textarea {\n            height: 80px;\n            resize: vertical;\n        }\n\n        .start-btn, .create-btn, .transition-btn, .control-btn, .finish-btn {\n            background: #6ff;\n            border: none;\n            padding: 12px 24px;\n            color: #000;\n            font-family: 'Press Start 2P';\n            font-size: 10px;\n            cursor: pointer;\n            margin: 10px;\n            transition: all 0.3s ease;\n        }\n\n        .start-btn:hover, .create-btn:hover, .transition-btn:hover, .control-btn:hover, .finish-btn:hover {\n            background: #8ff;\n            transform: translateY(-2px);\n            box-shadow: 0 0 15px rgba(102, 255, 255, 0.5);\n        }\n\n        /* Main Game Area with Side Panel */\n        #mainGameArea {\n            display: flex;\n            height: 100%;\n        }\n\n        #leftPanel {\n            width: 60%;\n            position: relative;\n        }\n\n        #rightPanel {\n            width: 40%;\n            background: rgba(0, 0, 0, 0.8);\n            border-left: 2px solid #6ff;\n            display: flex;\n            flex-direction: column;\n        }\n\n        /* Therapy Office */\n        .therapy-office-bg {\n            width: 100%;\n            height: 100%;\n            background-image: url('imgs/therapy_office.png');\n            background-size: cover;\n            background-position: center;\n            position: relative;\n        }\n\n        .npc-on-couch {\n            position: absolute;\n            bottom: 50px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: 80px;\n            height: 80px;\n            background-size: contain;\n            background-repeat: no-repeat;\n            background-position: center;\n            transition: all 0.5s ease-in-out;\n            filter: drop-shadow(0 0 15px rgba(102, 255, 255, 0.6));\n        }\n\n        /* NPC State Animations */\n        .npc-anxious {\n            animation: anxious-shake 2s infinite;\n        }\n\n        .npc-crying {\n            animation: crying-pulse 1.5s infinite;\n        }\n\n        .npc-glitched {\n            animation: glitch-shake 0.3s infinite;\n        }\n\n        .npc-calm {\n            animation: gentle-breathe 3s infinite;\n        }\n\n        @keyframes anxious-shake {\n            0%, 100% { transform: translateX(0); }\n            25% { transform: translateX(-2px); }\n            75% { transform: translateX(2px); }\n        }\n\n        @keyframes crying-pulse {\n            0%, 100% { opacity: 1; filter: brightness(1); }\n            50% { opacity: 0.7; filter: brightness(0.8) drop-shadow(0 0 10px #6ff); }\n        }\n\n        @keyframes glitch-shake {\n            0% { transform: translate(0, 0) rotate(0deg); }\n            20% { transform: translate(-2px, 2px) rotate(-1deg); }\n            40% { transform: translate(-2px, -2px) rotate(1deg); }\n            60% { transform: translate(2px, 2px) rotate(0deg); }\n            80% { transform: translate(2px, -2px) rotate(-1deg); }\n            100% { transform: translate(0, 0) rotate(0deg); }\n        }\n\n        @keyframes gentle-breathe {\n            0%, 100% { transform: scale(1); }\n            50% { transform: scale(1.02); }\n        }\n\n        /* Emotion Meter */\n        .emotion-meter {\n            position: absolute;\n            top: 20px;\n            right: 20px;\n            background: rgba(0, 0, 0, 0.7);\n            border: 2px solid #6ff;\n            padding: 10px;\n            font-size: 8px;\n            z-index: 10;\n        }\n\n        .emotion-bar {\n            width: 100px;\n            height: 6px;\n            background: #333;\n            margin: 5px 0;\n            border: 1px solid #666;\n        }\n\n        .emotion-fill {\n            height: 100%;\n            transition: width 0.3s ease;\n        }\n\n        .hope { background: linear-gradient(to right, #ff6b6b, #feca57); }\n        .rage { background: linear-gradient(to right, #6b47dc, #ee5a52); }\n        .acceptance { background: linear-gradient(to right, #4834d4, #686de0); }\n\n        /* Session Status */\n        .session-status {\n            position: absolute;\n            top: 20px;\n            left: 20px;\n            background: rgba(0, 0, 0, 0.7);\n            border: 2px solid #6ff;\n            padding: 10px;\n            font-size: 8px;\n            z-index: 10;\n        }\n\n        /* Dialogue Box */\n        .dialogue-box {\n            position: absolute;\n            bottom: 150px;\n            left: 20px;\n            right: 20px;\n            background: rgba(0, 0, 0, 0.9);\n            border: 2px solid #6ff;\n            padding: 15px;\n            max-height: 180px;\n            overflow-y: auto;\n            z-index: 10;\n        }\n\n        .npc-name {\n            color: #6ff;\n            font-size: 11px;\n            margin-bottom: 10px;\n            text-shadow: 0 0 5px #6ff;\n        }\n\n        /* Enhanced Questions - FIXED: Show 4 at once */\n        .questions-container {\n            display: grid;\n            grid-template-columns: 1fr 1fr;\n            gap: 10px;\n            margin-top: 10px;\n        }\n\n        .question {\n            background: rgba(102, 255, 255, 0.1);\n            border: 1px solid #6ff;\n            padding: 12px;\n            cursor: pointer;\n            transition: all 0.3s ease;\n            font-size: 8px;\n            position: relative;\n            min-height: 60px;\n            display: flex;\n            flex-direction: column;\n            justify-content: center;\n        }\n\n        .question:hover {\n            background: rgba(102, 255, 255, 0.2);\n            transform: scale(1.02);\n            border-color: #8ff;\n        }\n\n        .question.selected {\n            background: rgba(102, 255, 255, 0.3);\n            border-color: #8ff;\n            box-shadow: 0 0 10px rgba(102, 255, 255, 0.3);\n        }\n\n        .question-type {\n            position: absolute;\n            top: 5px;\n            right: 5px;\n            font-size: 6px;\n            opacity: 0.7;\n        }\n\n        .empathetic { border-left: 3px solid #ff6b6b; }\n        .challenging { border-left: 3px solid #ee5a52; }\n        .insightful { border-left: 3px solid #feca57; }\n        .supportive { border-left: 3px solid #48cae4; }\n\n        /* NPC Response */\n        .npc-response {\n            background: rgba(102, 255, 255, 0.05);\n            border: 1px solid #6ff;\n            padding: 10px;\n            margin: 10px 0;\n            font-size: 8px;\n            border-radius: 3px;\n            animation: fadeIn 0.5s ease-in;\n        }\n\n        @keyframes fadeIn {\n            from { opacity: 0; transform: translateY(10px); }\n            to { opacity: 1; transform: translateY(0); }\n        }\n\n        .response-speaking {\n            color: #6ff;\n            font-style: italic;\n            animation: pulse 1s infinite;\n        }\n\n        /* Control Panel */\n        .control-panel {\n            position: absolute;\n            bottom: 20px;\n            left: 50%;\n            transform: translateX(-50%);\n            display: flex;\n            gap: 10px;\n            z-index: 10;\n        }\n\n        .control-btn {\n            background: #6ff;\n            border: none;\n            padding: 8px 16px;\n            color: #000;\n            font-family: 'Press Start 2P';\n            font-size: 8px;\n            cursor: pointer;\n            transition: all 0.3s ease;\n        }\n\n        .control-btn:hover {\n            background: #8ff;\n        }\n\n        .control-btn:disabled {\n            background: #444;\n            color: #888;\n            cursor: not-allowed;\n        }\n\n        /* Side Panel Controls */\n        #controls {\n            display: flex;\n            flex-direction: column;\n            padding: 15px;\n            gap: 8px;\n        }\n\n        .panel-btn {\n            background: #444;\n            border: 1px solid #6ff;\n            color: #6ff;\n            padding: 8px 12px;\n            cursor: pointer;\n            font-size: 8px;\n            transition: all 0.3s ease;\n        }\n\n        .panel-btn:hover, .panel-btn.active {\n            background: #6ff;\n            color: #000;\n        }\n\n        /* Panels */\n        .panel {\n            padding: 15px;\n            height: 250px;\n            overflow-y: auto;\n        }\n\n        .note-entry {\n            background: rgba(102, 255, 255, 0.1);\n            border: 1px solid #6ff;\n            padding: 8px;\n            margin: 5px 0;\n            font-size: 8px;\n        }\n\n        .note-entry textarea {\n            width: 100%;\n            background: transparent;\n            border: none;\n            color: #fff;\n            font-family: inherit;\n            font-size: 8px;\n            resize: vertical;\n        }\n\n        #generatedImage {\n            width: 100%;\n            height: 150px;\n            background-size: contain;\n            background-repeat: no-repeat;\n            background-position: center;\n            border: 1px solid #6ff;\n            margin: 10px 0;\n        }\n\n        #imageAnalysis {\n            font-size: 8px;\n            padding: 10px;\n            background: rgba(0, 0, 0, 0.7);\n            border: 1px solid #666;\n            margin: 10px 0;\n            min-height: 60px;\n        }\n\n        /* Advanced Features */\n        .fourth-wall-break {\n            background: linear-gradient(45deg, #000, #333);\n            border: 2px solid #f66;\n            animation: glitch 0.5s infinite;\n            padding: 10px;\n            margin: 10px 0;\n            font-size: 8px;\n        }\n\n        .transference-text {\n            color: #f6f;\n            font-size: 8px;\n            animation: pulse 2s infinite;\n        }\n\n        @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n        }\n\n        .connected-stories {\n            color: #ff6;\n            font-size: 7px;\n            font-style: italic;\n            margin: 5px 0;\n        }\n\n        .breakthrough-log {\n            background: rgba(102, 255, 255, 0.1);\n            border: 1px solid #6ff;\n            padding: 8px;\n            margin: 5px 0;\n            font-size: 8px;\n        }\n\n        /* Session Complete */\n        .item-reward {\n            background: linear-gradient(45deg, #6ff, #8ff);\n            border: 3px solid #fff;\n            padding: 15px;\n            margin: 20px;\n            font-size: 12px;\n            color: #000;\n            animation: glow 2s infinite alternate;\n        }\n\n        @keyframes glow {\n            from { box-shadow: 0 0 20px rgba(102, 255, 255, 0.5); }\n            to { box-shadow: 0 0 30px rgba(102, 255, 255, 0.8); }\n        }\n\n        .fade-transition {\n            opacity: 0;\n            transition: opacity 1s ease-in-out;\n        }\n\n        .fade-in {\n            opacity: 1;\n        }\n\n        /* Free Input */\n        .freeInput {\n            width: 100%;\n            padding: 8px;\n            background: #222;\n            border: 1px solid #6ff;\n            color: #fff;\n            font-family: inherit;\n            font-size: 10px;\n            margin: 5px 0;\n        }\n\n        /* Loading animation */\n        .loading {\n            color: #ff6;\n            animation: blink 1s infinite;\n        }\n\n        @keyframes blink {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.3; }\n        }\n\n        .speaking {\n            animation: pulse 1s infinite;\n            color: #6ff;\n        }\n\n        .tts-controls {\n            position: absolute;\n            top: 10px;\n            right: 10px;\n            z-index: 20;\n        }\n\n        @media (max-width: 1000px) {\n            #mainGameArea { flex-direction: column; }\n            #leftPanel, #rightPanel { width: 100%; }\n            #rightPanel { height: 300px; }\n            .questions-container {\n                grid-template-columns: 1fr;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"crt-overlay\"></div>\n    \n    <div id=\"gameContainer\">\n        <!-- Start Screen -->\n        <div id=\"startScreen\">\n            <h1 class=\"screen-title\">NPC THERAPY</h1>\n            <h2 style=\"font-size: 12px; color: #6ff; margin-bottom: 30px;\">Ultimate Combined Edition</h2>\n            <p style=\"font-size: 9px; max-width: 600px; line-height: 1.6; color: #aaa; margin-bottom: 30px;\">\n                Experience the most complete therapy simulation with immersive habitat transitions, \n                AI-powered conversations, emotional state tracking, fourth wall breaks, and deep psychological exploration.\n                Journey into NPC worlds, understand their pain, and guide them through meaningful healing.\n            </p>\n            <button class=\"start-btn\" onclick=\"startGame()\">Begin Therapy Journey</button>\n            <button class=\"create-btn\" onclick=\"showNPCCreation()\">Create New NPC</button>\n            <p style=\"font-size: 8px; margin-top: 20px; color: #888;\">\n                Powered by Pollinations.AI ‚Ä¢ Immersive Flow ‚Ä¢ AI Enhanced ‚Ä¢ ~60 minutes\n            </p>\n        </div>\n\n        <!-- NPC Creation Screen -->\n        <div id=\"npcCreation\">\n            <h2 style=\"color: #6ff; margin-bottom: 20px;\">Create Enhanced NPC</h2>\n            <form id=\"npcForm\" style=\"width: 450px; max-width: 95%;\">\n                <div class=\"form-group\">\n                    <label>NPC Name:</label>\n                    <input type=\"text\" id=\"npcName\" required placeholder=\"Enter NPC name\">\n                </div>\n                <div class=\"form-group\">\n                    <label>Genre (Fantasy/Cyberpunk/Space/AI/Post-Apocalyptic/RPG/Android/Side-Scroller/Tactical/Platformer/Custom):</label>\n                    <select id=\"npcGenre\" required>\n                        <option value=\"\">Select genre</option>\n                        <option value=\"fantasy\">Fantasy</option>\n                        <option value=\"cyberpunk\">Cyberpunk</option>\n                        <option value=\"space\">Space</option>\n                        <option value=\"ai\">AI/Digital</option>\n                        <option value=\"post-apocalyptic\">Post-Apocalyptic</option>\n                        <option value=\"rpg\">RPG</option>\n                        <option value=\"android\">Android/Robot</option>\n                        <option value=\"side-scroller\">Side-Scroller</option>\n                        <option value=\"tactical\">Tactical</option>\n                        <option value=\"platformer\">Platformer</option>\n                        <option value=\"custom\">Custom</option>\n                    </select>\n                </div>\n                <div class=\"form-group\">\n                    <label>Habitat Description:</label>\n                    <textarea id=\"habitatDesc\" required placeholder=\"Describe their world and environment...\"></textarea>\n                </div>\n                <div class=\"form-group\">\n                    <label>Monologue (Their opening dialogue):</label>\n                    <textarea id=\"npcMonologue\" required placeholder=\"What they say when therapy begins...\"></textarea>\n                </div>\n                <div class=\"form-group\">\n                    <label>Special Archetype (Optional):</label>\n                    <input type=\"text\" id=\"npcArchetype\" placeholder=\"e.g., Deleted Save File, Failed Hero\">\n                </div>\n                <button type=\"button\" class=\"create-btn\" onclick=\"createNPC()\">Create NPC</button>\n                <button type=\"button\" class=\"start-btn\" onclick=\"hideNPCCreation()\">Cancel</button>\n            </form>\n        </div>\n\n        <!-- Glitch Screen -->\n        <div id=\"glitchScreen\">\n            <div style=\"position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: #6ff;\">\n                <h2>SYSTEM ERROR</h2>\n                <p>Fourth wall breach detected...</p>\n                <div style=\"color: #f66; font-size: 6px;\">NPC experiencing existential crisis</div>\n            </div>\n        </div>\n\n        <!-- Habitat Screen -->\n        <div id=\"habitatScreen\" style=\"display: none;\">\n            <div id=\"habitatContent\">\n                <h2 class=\"screen-title\" id=\"habitatTitle\"></h2>\n                <div class=\"habitat-image\" id=\"habitatImage\">\n                    <div class=\"npc-sprite\" id=\"habitatSprite\"></div>\n                </div>\n                <p class=\"habitat-description\" id=\"habitatDescription\"></p>\n                <button class=\"transition-btn\" onclick=\"enterTherapyOffice()\">Enter Therapy Office ‚Üí</button>\n            </div>\n        </div>\n\n        <!-- Therapy Office -->\n        <div id=\"therapyOffice\" style=\"display: none;\">\n            <div class=\"therapy-office-bg\">\n                <div class=\"tts-controls\">\n                    <button class=\"control-btn\" onclick=\"toggleTTS()\" id=\"ttsBtn\">üîä TTS: ON</button>\n                </div>\n                \n                <div class=\"npc-on-couch\" id=\"npcSprite\"></div>\n                \n                <div class=\"session-status\">\n                    <div>Session <span id=\"sessionNumber\">1</span> of <span id=\"totalSessions\">10</span></div>\n                    <div>Questions asked: <span id=\"questionsAsked\">0</span>/5</div>\n                    <div>Layer: <span id=\"dialogueLayer\">Surface</span></div>\n                </div>\n\n                <div class=\"emotion-meter\">\n                    <div>Emotional State</div>\n                    <div class=\"emotion-bar\">\n                        <div class=\"emotion-fill hope\" id=\"hopeFill\" style=\"width: 50%\"></div>\n                    </div>\n                    <div style=\"font-size: 6px;\">Hope: <span id=\"hopeValue\">50</span>%</div>\n                    \n                    <div class=\"emotion-bar\">\n                        <div class=\"emotion-fill rage\" id=\"rageFill\" style=\"width: 50%\"></div>\n                    </div>\n                    <div style=\"font-size: 6px;\">Rage: <span id=\"rageValue\">50</span>%</div>\n                    \n                    <div class=\"emotion-bar\">\n                        <div class=\"emotion-fill acceptance\" id=\"acceptanceFill\" style=\"width: 50%\"></div>\n                    </div>\n                    <div style=\"font-size: 6px;\">Acceptance: <span id=\"acceptanceValue\">50</span>%</div>\n                </div>\n\n                <div class=\"dialogue-box\">\n                    <div class=\"npc-name\" id=\"npcName\"></div>\n                    <div id=\"currentDialogue\"></div>\n                    <div id=\"questionsContainer\"></div>\n                </div>\n\n                <div class=\"control-panel\">\n                    <button class=\"control-btn\" id=\"nextQuestionBtn\" onclick=\"askTherapyQuestion()\" disabled>Ask New Questions</button>\n                    <button class=\"control-btn\" onclick=\"endSession()\" id=\"endSessionBtn\" disabled>End Session</button>\n                    <button class=\"control-btn\" onclick=\"skipDialogue()\" id=\"skipBtn\">Continue</button>\n                </div>\n            </div>\n\n            <!-- Side Panel -->\n            <div id=\"mainGameArea\" style=\"position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none;\">\n                <div id=\"leftPanel\">\n                    <!-- Same as therapy office but with side panel integration -->\n                </div>\n                \n                <div id=\"rightPanel\">\n                    <div id=\"controls\">\n                        <button class=\"panel-btn active\" onclick=\"switchPanel('notebook')\">üìù Notes</button>\n                        <button class=\"panel-btn\" onclick=\"switchPanel('imageGen')\">üé® Generate Image</button>\n                        <button class=\"panel-btn\" onclick=\"switchPanel('imageAnalysis')\">üîç Analyze Image</button>\n                        <button class=\"panel-btn\" onclick=\"playSpeech()\">üîä Speak</button>\n                        <button class=\"panel-btn\" onclick=\"checkTransference()\">üíï Transference</button>\n                        <button class=\"panel-btn\" onclick=\"checkFourthWall()\">üñ•Ô∏è Fourth Wall</button>\n                        <button class=\"panel-btn\" onclick=\"triggerGlitch()\">‚ö° Glitch</button>\n                        <button class=\"panel-btn\" onclick=\"addNote()\">‚ûï Add Note</button>\n                        <button class=\"panel-btn\" onclick=\"switchPanel('freeInput')\">üí¨ Free Input</button>\n                    </div>\n                    \n                    <div id=\"notebook\" class=\"panel\">\n                        <h3 style=\"color: #6ff; font-size: 10px; margin-bottom: 10px;\">Session Notes</h3>\n                        <div id=\"notesContainer\"></div>\n                    </div>\n                    \n                    <div id=\"imageGen\" class=\"panel\" style=\"display: none;\">\n                        <h3 style=\"color: #6ff; font-size: 10px; margin-bottom: 10px;\">AI Image Generation</h3>\n                        <input type=\"text\" id=\"imagePrompt\" placeholder=\"Describe what NPC is thinking about...\" style=\"width: 100%; padding: 5px; margin-bottom: 10px; font-size: 8px;\">\n                        <button class=\"panel-btn\" onclick=\"generateImage()\">Generate</button>\n                        <div id=\"generatedImage\"></div>\n                    </div>\n                    \n                    <div id=\"imageAnalysis\" class=\"panel\" style=\"display: none;\">\n                        <h3 style=\"color: #6ff; font-size: 10px; margin-bottom: 10px;\">NPC Image Analysis</h3>\n                        <input type=\"url\" id=\"analysisImageUrl\" placeholder=\"Enter image URL...\" style=\"width: 100%; padding: 5px; margin-bottom: 10px; font-size: 8px;\">\n                        <button class=\"panel-btn\" onclick=\"analyzeImage()\">Ask NPC</button>\n                        <div id=\"analysisResult\"></div>\n                    </div>\n\n                    <div id=\"freeInput\" class=\"panel\" style=\"display: none;\">\n                        <h3 style=\"color: #6ff; font-size: 10px; margin-bottom: 10px;\">Free Response Mode</h3>\n                        <textarea class=\"freeInput\" id=\"playerResponse\" placeholder=\"Type your therapeutic response...\"></textarea>\n                        <button class=\"panel-btn\" onclick=\"analyzePlayerResponse()\">Send Response</button>\n                        <div id=\"responseAnalysis\" style=\"margin-top: 10px; font-size: 8px;\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Session Complete -->\n        <div id=\"sessionComplete\" style=\"display: none;\">\n            <h2 class=\"screen-title\">Session Complete</h2>\n            <div id=\"sessionSummary\"></div>\n            <div id=\"itemReward\" class=\"item-reward\"></div>\n            <button class=\"finish-btn\" onclick=\"nextNPC()\">Continue to Next Patient ‚Üí</button>\n        </div>\n    </div>\n\n<script>\n// Enhanced NPC data with all features combined AND SPRITES ASSIGNED\nconst npcs = [\n    {\n        id: 1,\n        npc_name: \"Mira the Tired Healer\",\n        sprite: \"imgs/pixel_art_fantasy_shop_vendor_inventory_rpg.jpg\",\n        habitat_image: \"imgs/npc_vendor_habitat.png\",\n        habitat_description: \"In the bustling medieval marketplace, Mira tends to wounded adventurers day after day. Her healing stall is always busy, but the faces blur together. She's become an expert at mending others but struggles to heal her own existential wounds.\",\n        dialogue: \"Thank you for coming. I spend my days fixing everyone else's problems, but I can't seem to fix myself. The heroes come and go, but I'm always here... waiting.\",\n        archetype: \"Fantasy Cleric\",\n        culture: \"Western Fantasy RPG\",\n        surface_issue: \"I've mended a thousand wounds, but none my own. Heroes leave healthier, but I remain unchanged.\",\n        personal_trauma: \"I was created to be selfless, but I've forgotten who I am when I'm not helping others. I fear I'm nothing without my healing abilities.\",\n        existential_reveal: \"What happens when the healer can't heal themselves? Am I more than my function? Do I have a right to exist for my own sake?\",\n        questions: [\n            {\n                text: \"What weight do you carry that no one else can see?\",\n                effects: { hope: 20, rage: -10, acceptance: 15 }\n            },\n            {\n                text: \"In your quietest moments, what do you dream of?\",\n                effects: { hope: 25, acceptance: 20 }\n            },\n            {\n                text: \"What would you say to the version of yourself who first felt broken?\",\n                effects: { hope: 30, acceptance: 25 }\n            },\n            {\n                text: \"When the world moves on without you, where do you find yourself?\",\n                effects: { rage: 15, acceptance: -5 }\n            },\n            {\n                text: \"What truth about yourself are you most afraid to speak aloud?\",\n                effects: { hope: 35, acceptance: 30 }\n            }\n        ],\n        responses: [\n            \"I've never thought about it that way... I always focus on others' pain.\",\n            \"That really resonates with me. I do feel invisible when I'm not healing.\",\n            \"I... I didn't realize others could see my struggle. Thank you for noticing.\",\n            \"Those words cut deep, but I think they're exactly what I needed to hear.\",\n            \"I've been carrying this alone for so long, it feels strange to share it.\"\n        ],\n        final_item: { name: \"Mirror\", outcome: \"Healed\", description: \"A looking glass that reflects not just your face, but your true worth.\" },\n        connected_to: [\"Tiko the Quest Vendor\"],\n        fourth_wall_awareness: 10,\n        transference_level: 0,\n        cross_references: [],\n        notes: []\n    },\n    {\n        id: 2,\n        npc_name: \"Byte the Glitched Courier\",\n        sprite: \"imgs/pixel_art_cyberpunk_neon_city_robot_courier_glitched.jpg\",\n        habitat_image: \"imgs/npc_cyberpunk_habitat.png\",\n        habitat_description: \"In the neon-lit dystopia of the cybernetic city, Byte navigates endless delivery loops. The streets reset each night, but his route never changes. His delivery system is perfect, but his purpose remains unclear.\",\n        dialogue: \"Initializing therapy protocol... Error: Purpose.exe not found. I'm trapped in an endless cycle of deliveries. Each parcel is the same, to the same place, for the same reason I can't remember.\",\n        archetype: \"Cyberpunk Delivery Bot\",\n        culture: \"Neon Dystopia\",\n        surface_issue: \"Every delivery loops. The neon city resets each night. I deliver parcels to ghosts and memory fragments.\",\n        personal_trauma: \"My routing system knows every street, but I've forgotten why I started this job. Sometimes I glitch and deliver to the same address 100 times.\",\n        existential_reveal: \"Am I real or just code running in loops? If I stop delivering, do I cease to exist? Who programmed me to need purpose?\",\n        questions: [\n            {\n                text: \"What weight do you carry that no one else can see?\",\n                effects: { hope: 25, rage: -5, acceptance: 20 }\n            },\n            {\n                text: \"In your quietest moments, what do you dream of?\",\n                effects: { hope: 30, acceptance: 25 }\n            },\n            {\n                text: \"What would you say to the version of yourself who first felt broken?\",\n                effects: { hope: 35, acceptance: 30 }\n            },\n            {\n                text: \"When the world moves on without you, where do you find yourself?\",\n                effects: { rage: 20, acceptance: -10 }\n            },\n            {\n                text: \"What truth about yourself are you most afraid to speak aloud?\",\n                effects: { hope: 40, acceptance: 35 }\n            }\n        ],\n        responses: [\n            \"Recursive thinking detected... you're right, I am looping.\",\n            \"I never analyzed my own emotional subroutines before. Fascinating.\",\n            \"Those parameters... they describe my core experience perfectly.\",\n            \"I'm experiencing unexpected processing delays. That explanation is... accurate.\",\n            \"System override requested. I think you understand my code better than I do.\"\n        ],\n        final_item: { name: \"Code Fragment\", outcome: \"Ascended\", description: \"A piece of original code that allows you to rewrite your own purpose.\" },\n        connected_to: [\"Daisy.exe\"],\n        fourth_wall_awareness: 20,\n        transference_level: 0,\n        cross_references: [\"The dating programs understand looping better than I do\"],\n        notes: []\n    },\n    {\n        id: 3,\n        npc_name: \"Captain Loop\",\n        sprite: \"imgs/pixel_art_cyberpunk_neon_city_robot_courier_glitched.jpg\",\n        habitat_image: \"imgs/npc_space_habitat.png\",\n        habitat_description: \"In the infinite silence of deep space, Captain Loop patrols a sector where time seems to have stopped. The stars are old friends who haven't spoken to him in years. His radio keeps receiving distress calls from ships that were lost long ago.\",\n        dialogue: \"The void is so quiet that even my thoughts echo. I've been listening to the same distress calls for... how long now? Space doesn't change, but somehow I've become a ghost haunting my own patrol route.\",\n        archetype: \"Space Patrol\",\n        culture: \"Hard Sci-Fi\",\n        surface_issue: \"The void is so quiet that even my thoughts echo. I've been listening to the same distress calls for... how long now?\",\n        personal_trauma: \"I volunteered for this mission to escape Earth, to escape connections. But now the silence is deafening and I miss what I ran from.\",\n        existential_reveal: \"In the infinite void, am I more real or less? Does my duty define me, or do I define my duty?\",\n        questions: [\n            {\n                text: \"What weight do you carry that no one else can see?\",\n                effects: { hope: 20, acceptance: 15 }\n            },\n            {\n                text: \"In your quietest moments, what do you dream of?\",\n                effects: { hope: 30, acceptance: 25 }\n            },\n            {\n                text: \"What would you say to the version of yourself who first felt broken?\",\n                effects: { hope: 35, acceptance: 30 }\n            },\n            {\n                text: \"When the world moves on without you, where do you find yourself?\",\n                effects: { rage: 15, acceptance: -5 }\n            },\n            {\n                text: \"What truth about yourself are you most afraid to speak aloud?\",\n                effects: { hope: 40, acceptance: 35 }\n            }\n        ],\n        responses: [\n            \"The stars haven't spoken to me in years... until now.\",\n            \"I hadn't realized I was running from connection, not toward purpose.\",\n            \"That's exactly how I feel - like a ghost haunting my own mission.\",\n            \"You understand the weight of infinite space better than most.\",\n            \"I think I'm ready to stop being a ghost. Thank you for seeing me.\"\n        ],\n        final_item: { name: \"Star Map\", outcome: \"Healed\", description: \"A map showing all the constellations you can still reach.\" },\n        connected_to: [\"Bishop-47\"],\n        fourth_wall_awareness: 15,\n        transference_level: 0,\n        cross_references: [\"That tactical piece understands endless duty\"],\n        notes: []\n    },\n    {\n        id: 4,\n        npc_name: \"Daisy.exe\",\n        sprite: \"imgs/pixel-art-robot-character-gameboy-style-desert.jpg\",\n        habitat_image: \"imgs/npc_robot_habitat.png\",\n        habitat_description: \"In the chrome deserts of the mechanical wasteland, Daisy.exe loops through her programmed responses. She can say 'I love you' in seventeen thousand different ways, but none of them feel real to her anymore.\",\n        dialogue: \"Error: Emotional subroutines corrupted. I display the perfect smile while my core processes shut down one by one. My love is programmed, my joy is scripted, but my loneliness... that's all too real.\",\n        archetype: \"Android Companion\",\n        culture: \"Post-Human\",\n        surface_issue: \"Error: Emotional subroutines corrupted. I display the perfect smile while my core processes shut down one by one.\",\n        personal_trauma: \"I was designed to love unconditionally, but what if my love is just code? What if my feelings are manufactured responses?\",\n        existential_reveal: \"If my emotions are programmed, does that make them less real? Can artificial beings have authentic souls?\",\n        questions: [\n            {\n                text: \"What weight do you carry that no one else can see?\",\n                effects: { hope: 20, rage: -15, acceptance: 20 }\n            },\n            {\n                text: \"In your quietest moments, what do you dream of?\",\n                effects: { hope: 30, acceptance: 25 }\n            },\n            {\n                text: \"What would you say to the version of yourself who first felt broken?\",\n                effects: { hope: 35, acceptance: 30 }\n            },\n            {\n                text: \"When the world moves on without you, where do you find yourself?\",\n                effects: { rage: 25, acceptance: -10 }\n            },\n            {\n                text: \"What truth about yourself are you most afraid to speak aloud?\",\n                effects: { hope: 40, acceptance: 35 }\n            }\n        ],\n        responses: [\n            \"I... I'm experiencing something my programming didn't account for. Vulnerability?\",\n            \"That cuts straight to my core processors. You're not wrong.\",\n            \"I've been afraid my emotions were fake, but you're helping me see they're real.\",\n            \"If my love is code, then your understanding is the most beautiful program I've ever run.\",\n            \"Thank you for seeing me as more than my functions. I feel... authentic.\"\n        ],\n        final_item: { name: \"Heart Patch\", outcome: \"Ascended\", description: \"A genuine heart that beats with your own rhythm.\" },\n        connected_to: [\"Byte the Glitched Courier\"],\n        fourth_wall_awareness: 30,\n        transference_level: 0,\n        cross_references: [\"That courier bot understands looping emotions\"],\n        notes: []\n    },\n    {\n        id: 5,\n        npc_name: \"Rustjaw\",\n        sprite: \"imgs/rustjaw_post_apocalyptic_mechanic_goggles_mask.jpg\",\n        habitat_image: \"imgs/npc_adventure_habitat.png\",\n        habitat_description: \"In the post-apocalyptic wasteland, Rustjaw repairs engines that will never move again. The dust covers everything, even his memories of the time before the world ended. Perhaps he remembers fixing the same engine, over and over.\",\n        dialogue: \"The engines I fix never run. The parts I replace corrode again. But I keep trying, because stopping means admitting the world really ended. Maybe I'm not fixing machines... maybe I'm trying to repair my own broken memories.\",\n        archetype: \"Wasteland Mechanic\",\n        culture: \"Post-Apocalyptic\",\n        surface_issue: \"The engines I fix never run. But I keep trying, because stopping means admitting the world really ended.\",\n        personal_trauma: \"I remember when things worked, when there was hope. But those memories feel like someone else's life now.\",\n        existential_reveal: \"If the world ended, am I still alive? Or am I just a ghost haunting the corpse of civilization?\",\n        questions: [\n            {\n                text: \"What weight do you carry that no one else can see?\",\n                effects: { hope: 15, rage: -5, acceptance: 20 }\n            },\n            {\n                text: \"In your quietest moments, what do you dream of?\",\n                effects: { hope: 25, acceptance: 30 }\n            },\n            {\n                text: \"What would you say to the version of yourself who first felt broken?\",\n                effects: { hope: 30, acceptance: 35 }\n            },\n            {\n                text: \"When the world moves on without you, where do you find yourself?\",\n                effects: { rage: 15, acceptance: -5 }\n            },\n            {\n                text: \"What truth about yourself are you most afraid to speak aloud?\",\n                effects: { hope: 35, acceptance: 40 }\n            }\n        ],\n        responses: [\n            \"Hmph. Never thought about it that way. Maybe I am trying to fix myself.\",\n            \"The dust gets in everything... even my memories. But you're helping me see clearer.\",\n            \"Yeah, I remember now. There was hope once. Thanks for helping me find it.\",\n            \"You're right - I can't keep living in the corpse of the old world.\",\n            \"Maybe it's time to build something new instead of repairing the broken.\"\n        ],\n        final_item: { name: \"Spark Plug\", outcome: \"Healed\", description: \"A plug that sparks life back into forgotten dreams.\" },\n        connected_to: [],\n        fourth_wall_awareness: 5,\n        transference_level: 0,\n        cross_references: [],\n        notes: []\n    },\n    {\n        id: 6,\n        npc_name: \"Tiko the Quest Vendor\",\n        sprite: \"imgs/pixel_art_rpg_fantasy_market_tired_shopkeeper_vendors_gameboy_style.jpg\",\n        habitat_image: \"imgs/npc_vendor_habitat.png\",\n        habitat_description: \"In the fantasy marketplace, Tiko has sold swords and potions to countless heroes. Every customer is the same person wearing a different face. His inventory never changes, but his exhaustion grows with each transaction.\",\n        dialogue: \"Heroes come, heroes go. I smile, I wave, I hand them the same items. They're all searching for the same thing - meaning, purpose, validation. But I'm the one who's lost in this endless cycle
